<form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="container">
    <div class="mb-3">
        <label for="firstName" class="form-label">Primeiro Nome:</label>
        <input
        type="text"
        id="firstName"
        class="form-control"
        formControlName="firstName"
        placeholder="Introduza o primeiro nome"/>
        <div *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched" class="text-danger">
            Obrigatório (mínimo 2 caracteres).
        </div>
    </div>

    <div class="mb-3">
        <label for="lastName" class="form-label">Último Nome:</label>
        <input
        type="text"
        id="lastName"
        class="form-control"
        formControlName="lastName"
        placeholder="Introduza o último nome"/>
        <div *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched" class="text-danger">
            Obrigatório (mínimo 2 caracteres).
        </div>
    </div>

    <div formGroupName="perfil">
        <div class="mb-3">
            <label for="phoneNumber" class="form-label">Telemóvel:</label>
            <input
                type="text"
                id="phoneNumber"
                class="form-control"
                formControlName="phoneNumber"
                placeholder="Introduza o número de telemóvel"/>
            <div *ngIf="form.get('perfil.phoneNumber')?.invalid && form.get('perfil.phoneNumber')?.touched" class="text-danger">
                Obrigatório (apenas dígitos).
            </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input
                type="email"
                id="email"
                class="form-control"
                formControlName="email"
                placeholder="Introduza o email"/>
            <div *ngIf="form.get('perfil.email')?.invalid && form.get('perfil.email')?.touched" class="text-danger">
                Insira um email válido.
            </div>
        </div>

        <div class="mb-3">
            <label for="perfilPhoto" class="form-label">Foto de Perfil:</label>
            <input
                type="file"
                id="perfilPhoto"
                class="form-control"
                (change)="onFileSelected($event)"
                accept="image/*"
            />
        </div>
    </div>

    <div class="mb-3">
        <label for="birthdate" class="form-label">Data de Nascimento:</label>
        <input
        type="date"
        id="birthdate"
        class="form-control"
        formControlName="birthdate"
        placeholder="Introduza uma data"
        [min]="'2000-01-01'"/>
        <div *ngIf="form.get('birthdate')?.invalid && form.get('birthdate')?.touched" class="text-danger">
            Data inválida.
        </div>
    </div>

    <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
            Guardar
        </button>

        <button type="button" class="btn btn-secondary" (click)="goBack()">
            Voltar
        </button>
    </div>
</form>
