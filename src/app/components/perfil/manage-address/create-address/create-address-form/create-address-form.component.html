<div class="container mt-4">
  <h3 class="mb-4">Criar Morada</h3>

  <form #addressForm="ngForm" (ngSubmit)="saveAddress(addressForm)" novalidate>

    <!-- NIF -->
    <div class="mb-3">
      <label for="nif" class="form-label">NIF</label>
      <input type="number"
             id="nif"
             name="nif"
             class="form-control"
             min="100000000"
             max="999999999"
             [(ngModel)]="addressData.nif"
             placeholder="Introduza o NIF (9 dígitos)">
      <div *ngIf="addressForm.submitted && addressForm.controls['nif']?.invalid" class="text-danger">
        O NIF deve conter exatamente 9 dígitos.
      </div>
    </div>

    <!-- Rua -->
    <div class="mb-3">
      <label for="street" class="form-label">Rua</label>
      <input type="text"
             id="street"
             name="street"
             class="form-control"
             maxlength="250"
             required
             [(ngModel)]="addressData.street"
             placeholder="Introduza a rua">
      <div *ngIf="addressForm.submitted && addressForm.controls['street']?.invalid" class="text-danger">
        A rua é obrigatória.
      </div>
    </div>

    <!-- Código Postal -->
    <div class="mb-3">
      <label for="postal_code" class="form-label">Código Postal</label>
      <input type="text"
             id="postal_code"
             name="postal_code"
             class="form-control"
             pattern="[0-9]{4}-[0-9]{3}"
             required
             [(ngModel)]="addressData.postal_code"
             placeholder="0000-000">
      <div *ngIf="addressForm.submitted && addressForm.controls['postal_code']?.invalid" class="text-danger">
        Código postal inválido (formato: 0000-000).
      </div>
    </div>

    <!-- Cidade -->
    <div class="mb-3">
      <label for="city" class="form-label">Cidade</label>
      <input type="text"
             id="city"
             name="city"
             class="form-control"
             maxlength="100"
             required
             [(ngModel)]="addressData.city"
             placeholder="Introduza a cidade">
      <div *ngIf="addressForm.submitted && addressForm.controls['city']?.invalid" class="text-danger">
        A cidade é obrigatória.
      </div>
    </div>

    <!-- Botões -->
    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
      <button type="submit" class="btn btn-success">
        <i class="bi bi-check-circle me-1"></i> Guardar
      </button>
      <button type="button" class="btn btn-secondary ms-2" (click)="goBack()">
        Cancelar
      </button>
    </div>
  </form>
</div>
